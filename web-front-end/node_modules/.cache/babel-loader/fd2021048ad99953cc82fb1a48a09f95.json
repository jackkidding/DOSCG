{"ast":null,"code":"import { Loader } from '@googlemaps/loader';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nfunction __generator(thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\n\nvar GoogleMap =\n/** @class */\nfunction () {\n  function GoogleMap() {}\n\n  GoogleMap.prototype.initMap = function (options) {\n    return __awaiter(this, void 0, void 0, function () {\n      var mapDiv, map;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.loadJSAPI(options)];\n\n          case 1:\n            _a.sent();\n\n            mapDiv = this.getMapDiv(options);\n            map = new google.maps.Map(mapDiv, options.mapOptions);\n            return [2\n            /*return*/\n            , map];\n        }\n      });\n    });\n  };\n\n  GoogleMap.prototype.getMapDiv = function (options) {\n    // Get the div to load the map into\n    var mapDiv = document.getElementById(options.divId);\n\n    if (options.append) {\n      mapDiv = this.appendMapDiv(mapDiv);\n    }\n\n    return mapDiv;\n  };\n\n  GoogleMap.prototype.appendMapDiv = function (mapDiv) {\n    var appendDivId = 'google_map_appended';\n    var appendDiv = document.createElement('div');\n    appendDiv.setAttribute('id', appendDivId);\n    mapDiv.appendChild(appendDiv);\n    return appendDiv;\n  };\n\n  GoogleMap.prototype.loadJSAPI = function (options) {\n    return __awaiter(this, void 0, void 0, function () {\n      var loaderOptions, loader;\n      return __generator(this, function (_a) {\n        if (!options.apiOptions) {\n          options.apiOptions = {};\n        }\n\n        loaderOptions = Object.assign(options.apiOptions, {\n          apiKey: options.apiKey\n        });\n        loader = new Loader(loaderOptions); // Load the Maps JS API\n\n        return [2\n        /*return*/\n        , loader.load()];\n      });\n    });\n  };\n\n  return GoogleMap;\n}();\n\nexport { GoogleMap };","map":{"version":3,"sources":["../src/map-loader.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,WAAA,SAAA,GAAA,CAqCC;;AApCO,EAAA,SAAA,CAAA,SAAA,CAAA,OAAA,GAAN,UAAc,OAAd,EAAuC;;;;;;AACrC,mBAAA,CAAA;AAAA;AAAA,cAAM,KAAK,SAAL,CAAe,OAAf,CAAN,CAAA;;;AAAA,YAAA,EAAA,CAAA,IAAA;;AACM,YAAA,MAAM,GAAY,KAAK,SAAL,CAAe,OAAf,CAAlB;AAEA,YAAA,GAAG,GAAG,IAAI,MAAM,CAAC,IAAP,CAAY,GAAhB,CAAoB,MAApB,EAA4B,OAAO,CAAC,UAApC,CAAN;AACN,mBAAA,CAAA;AAAA;AAAA,cAAO,GAAP,CAAA;;;;AACD,GANK;;AAQE,EAAA,SAAA,CAAA,SAAA,CAAA,SAAA,GAAR,UAAkB,OAAlB,EAA2C;;AAEzC,QAAI,MAAM,GAAY,QAAQ,CAAC,cAAT,CAAwB,OAAO,CAAC,KAAhC,CAAtB;;AACA,QAAI,OAAO,CAAC,MAAZ,EAAoB;AAClB,MAAA,MAAM,GAAG,KAAK,YAAL,CAAkB,MAAlB,CAAT;AACD;;AACD,WAAO,MAAP;AACD,GAPO;;AASA,EAAA,SAAA,CAAA,SAAA,CAAA,YAAA,GAAR,UAAqB,MAArB,EAAoC;AAClC,QAAM,WAAW,GAAG,qBAApB;AACA,QAAM,SAAS,GAAY,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAA3B;AACA,IAAA,SAAS,CAAC,YAAV,CAAuB,IAAvB,EAA6B,WAA7B;AACA,IAAA,MAAM,CAAC,WAAP,CAAmB,SAAnB;AACA,WAAO,SAAP;AACD,GANO;;AAQM,EAAA,SAAA,CAAA,SAAA,CAAA,SAAA,GAAd,UAAwB,OAAxB,EAAiD;;;;AAC/C,YAAI,CAAC,OAAO,CAAC,UAAb,EAAyB;AACvB,UAAA,OAAO,CAAC,UAAR,GAAqB,EAArB;AACD;;AACK,QAAA,aAAa,GACjB,MAAM,CAAC,MAAP,CAAc,OAAO,CAAC,UAAtB,EAAkC;AAAC,UAAA,MAAM,EAAE,OAAO,CAAC;AAAjB,SAAlC,CADI;AAGA,QAAA,MAAM,GAAW,IAAI,MAAJ,CAAW,aAAX,CAAjB,C;;AAEN,eAAA,CAAA;AAAA;AAAA,UAAO,MAAM,CAAC,IAAP,EAAP,CAAA;;;AACD,GAVa;;AAWhB,SAAA,SAAA;AAAC,C","sourcesContent":["/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Loader, LoaderOptions} from '@googlemaps/loader';\n\nexport interface MapLoaderOptions {\n  apiKey: string;\n  divId: string;\n  mapOptions: google.maps.MapOptions;\n  apiOptions?: MapsJSAPIOptions;\n  append?: boolean;\n}\n\nexport type MapsJSAPIOptions = Omit<LoaderOptions, 'apiKey'>;\n\nexport class GoogleMap {\n  async initMap(options: MapLoaderOptions): Promise<google.maps.Map<Element>> {\n    await this.loadJSAPI(options);\n    const mapDiv: Element = this.getMapDiv(options);\n    // Initialize the map\n    const map = new google.maps.Map(mapDiv, options.mapOptions);\n    return map;\n  }\n\n  private getMapDiv(options: MapLoaderOptions): Element {\n    // Get the div to load the map into\n    let mapDiv: Element = document.getElementById(options.divId);\n    if (options.append) {\n      mapDiv = this.appendMapDiv(mapDiv);\n    }\n    return mapDiv;\n  }\n\n  private appendMapDiv(mapDiv: Element): Element {\n    const appendDivId = 'google_map_appended';\n    const appendDiv: Element = document.createElement('div');\n    appendDiv.setAttribute('id', appendDivId);\n    mapDiv.appendChild(appendDiv);\n    return appendDiv;\n  }\n\n  private async loadJSAPI(options: MapLoaderOptions): Promise<void> {\n    if (!options.apiOptions) {\n      options.apiOptions = {};\n    }\n    const loaderOptions: LoaderOptions =\n      Object.assign(options.apiOptions, {apiKey: options.apiKey});\n\n    const loader: Loader = new Loader(loaderOptions);\n    // Load the Maps JS API\n    return loader.load();\n  }\n}\n"]},"metadata":{},"sourceType":"module"}